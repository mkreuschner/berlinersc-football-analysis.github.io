<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles/css/all_pages.css" />
  <link rel="stylesheet" href="styles/css/first_page.css" />
  <title>RESULTS</title>
  <style>
    /* Aktive Seite im Header (RESULTS) leicht gelb hervorheben */
    .navbar a.active-nav {
      background: #000 !important;
      color: #fff4b8 !important;
      font-weight: 600;
    }

    /* Tabs – zentriert im Badge-Stil */
    .tabs-wrap { display: flex; justify-content: center; }
    .tabs { display: inline-flex; gap: .75rem; margin: 1rem 0 .5rem; padding-bottom: 10px; }

    .tab-btn {
      position: relative;
      appearance: none;
      border: none;
      cursor: pointer;
      padding: .35rem .9rem;
      background: #000;   /* schwarze Box */
      color: #fff;        /* weiße Schrift */
      border-radius: 2px;
      font-weight: 600;
      line-height: 1.2;
    }
    .tab-btn:hover { opacity: .9; }
    .tab-btn.active { text-decoration: none; }

    /* Schwarzer Strich UNTER der Box */
    .tab-btn::after {
      content: "";
      position: absolute;
      left: 0;
      right: 0;
      height: 2px;
      background: #000;   /* fix: immer schwarz, nicht currentColor */
      bottom: -6px;
      opacity: 0;
      transform: scaleX(0.9);
      transition: opacity .2s ease, transform .2s ease;
    }
    .tab-btn.active::after {
      opacity: 1;
      transform: scaleX(1);
    }

    /* Panels */
    .tab-panel { display: none; }
    .tab-panel.active { display: block; }
    .panel-inner { margin-top: .75rem; }
    .team-cell{display:inline-flex;align-items:center;gap:.4rem}
    .team-logo{width:20px;height:20px;object-fit:contain}
  </style>
</head>
<body>

  <!-- Navigation Bar -->
  <div class="w3-top">
    <div class="w3-row w3-padding w3-black">
      <div class="navbar" id="navbar">
          <div class="w3-col s3">
              <a href="index.html" class="w3-button w3-block w3-black">BACK</a>
          </div>
          <div class="w3-col s3">
              <a href="h1_page01.html" class="w3-button w3-block w3-black active-nav">RESULTS</a>
          </div>
          <div class="w3-col s3">
              <a href="h1_page02.html" class="w3-button w3-block w3-black">ANALYSIS</a>
          </div>
          <div class="w3-col s3">
              <a href="h1_page03.html" class="w3-button w3-block w3-black">PLAYER</a>
          </div>
      </div>
    </div>
  </div>

  <!-- Inhalt -->
  <div class="w3-container" style="margin-top:56px">
    <!-- Umschalter wie "RESULTS"-Badge, zentriert -->
    <div class="tabs-wrap">
      <nav class="tabs" role="tablist" aria-label="Ansicht wählen">
        <button class="tab-btn active" id="tab-spieltag" role="tab" aria-selected="true" aria-controls="panel-spieltag">Spieltag</button>
        <button class="tab-btn" id="tab-tabellen" role="tab" aria-selected="false" aria-controls="panel-tabellen">Tabellen</button>
        <button class="tab-btn" id="tab-scorer" role="tab" aria-selected="false" aria-controls="panel-scorer">Scorer</button>
        <button class="tab-btn" id="tab-player" role="tab" aria-selected="false" aria-controls="panel-player">Beste Spieler</button>
      </nav>
    </div>

    <!-- Panel: Spieltag -->
    <section class="tab-panel active" id="panel-spieltag" role="tabpanel" aria-labelledby="tab-spieltag">
      <div class="panel-inner">
        <div class="container">
          <div class="w3-container" id="matchday">
            <div class="matchday-navigation">
              <button id="prevMatchday" style="margin-right: 0.1rem; background-color: black; color: white;">&#x2039;</button>
              <select id="matchdaySelect">
                <option value="">-- Wähle einen Spieltag --</option>
              </select>
              <button id="nextMatchday" style="margin-left: 0.1rem; background-color: black; color: white;">&#x203A;</button>
            </div>
            <div id="matchday-container" style="margin-top: 1rem;">
              <div id="dataMatchday"></div>
            </div>
          </div>
        </div>
      </div>
    </section>

  <!-- PANEL: Tabellen -->
  <section class="tab-panel" id="panel-tabellen" role="tabpanel" aria-labelledby="tab-tabellen">
    <div class="panel-inner">
      <div class="w3-container" id="table-tabellen">
        <div class="select-container">
          <select id="tableSelect-tabellen">
            <option value="">-- Tabelle auswählen --</option>
            <option value="https://raw.githubusercontent.com/mkreuschner/berlinersc-football-analysis.github.io/main/data/H1/Routput/gesamttabelle_H1.csv" data-columns="#,team,S,Tore,Dif,Pkt">Gesamttabelle</option>
            <option value="https://raw.githubusercontent.com/mkreuschner/berlinersc-football-analysis.github.io/main/data/H1/Routput/formtabelle_H1.csv" data-columns="#,team,E5,E4,E3,E2,E1,Tore,Pkt" data-special="form">Formtabelle</option>
            <option value="https://raw.githubusercontent.com/mkreuschner/berlinersc-football-analysis.github.io/main/data/H1/Routput/heimtabelle_H1.csv" data-columns="#,team,S,Tore,Dif,Pkt">Heimtabelle</option>
            <option value="https://raw.githubusercontent.com/mkreuschner/berlinersc-football-analysis.github.io/main/data/H1/Routput/auswaertstabelle_H1.csv" data-columns="#,team,S,Tore,Dif,Pkt">Auswärtstabelle</option>
            <option value="https://raw.githubusercontent.com/mkreuschner/berlinersc-football-analysis.github.io/main/data/H1/Routput/rasentabelle_H1.csv" data-columns="#,team,S,Tore,Dif,Pkt">Rasentabelle</option>
            <option value="https://raw.githubusercontent.com/mkreuschner/berlinersc-football-analysis.github.io/main/data/H1/Routput/kunstrasentabelle_H1.csv" data-columns="#,team,S,Tore,Dif,Pkt">Kunstrasentabelle</option>
            <option value="https://raw.githubusercontent.com/mkreuschner/berlinersc-football-analysis.github.io/main/data/H1/Routput/kleinkunstrasentabelle_H1.csv" data-columns="#,team,S,Tore,Dif,Pkt">kleiner-Platz-Tabelle</option>
          </select>
        </div>
        <div id="table-container-tabellen" style="margin-top: 1rem;"></div>
      </div>
    </div>
  </section>

  <!-- PANEL: Scorer -->
  <section class="tab-panel" id="panel-scorer" role="tabpanel" aria-labelledby="tab-scorer">
    <div class="panel-inner">
      <div class="table-scroll">
      <div class="w3-container" id="table-scorer">
        <div class="select-container">
          <select id="tableSelect-scorer">
            <option value="">-- Tabelle auswählen --</option>
            <option value="https://raw.githubusercontent.com/mkreuschner/berlinersc-football-analysis.github.io/main/data/H1/Routput/scorerpoints_H1.csv" data-columns="#,team,S,Tore,Dif,Pkt">Scorer</option>
          </select>
        </div>
        <div id="table-container-scorer" style="margin-top: 1rem;"></div>
      </div>
      </div>
    </div>
  </section>

  <!-- PANEL: Beste Spieler -->
  <section class="tab-panel" id="panel-player" role="tabpanel" aria-labelledby="tab-player">
    <div class="panel-inner">
      <div class="table-scroll">
      <div class="w3-container" id="table-player">
        <div class="select-container">
          <select id="tableSelect-player">
            <option value="">-- Tabelle auswählen --</option>
            <option value="https://raw.githubusercontent.com/mkreuschner/berlinersc-football-analysis.github.io/main/data/H1/Routput/best_score_H1.csv" data-columns="#,team,S,Tore,Dif,Pkt">Best Player</option>
          </select>
        </div>
        <div id="table-container-player" style="margin-top: 1rem;"></div>
      </div>
      </div>
    </div>
  </section>


  <!-- Footer -->
  <footer class="w3-center w3-light-grey w3-padding-48 w3-large">
      <p>created by Moritz</p>
  </footer>

  <script src="js/chart.umd.min.js"></script>
  <script src="js/papaparse.min.js"></script>
  <script src="js/h1_first_page.js"></script>

  <!-- Tabs-Logik -->
  <script>
    (function () {
      const tabs = Array.from(document.querySelectorAll('.tab-btn'));
      const panels = Array.from(document.querySelectorAll('.tab-panel'));

      function activateByPanelId(panelId) {
        // Buttons
        tabs.forEach(btn => {
          const isActive = btn.getAttribute('aria-controls') === panelId;
          btn.classList.toggle('active', isActive);
          btn.setAttribute('aria-selected', String(isActive));
        });
        // Panels
        panels.forEach(panel => {
          panel.classList.toggle('active', panel.id === panelId);
        });
      }

      // Klick + Tastatur
      tabs.forEach((btn, idx) => {
        btn.addEventListener('click', () => {
          const panelId = btn.getAttribute('aria-controls');
          activateByPanelId(panelId);
        });
        btn.addEventListener('keydown', (e) => {
          if (e.key === 'ArrowRight' || e.key === 'ArrowLeft') {
            e.preventDefault();
            const next = e.key === 'ArrowRight' ? (idx + 1) % tabs.length : (idx - 1 + tabs.length) % tabs.length;
            tabs[next].focus();
          }
        });
      });

      // Startzustand: aktiver Button bestimmt das Panel
      const initiallyActive = tabs.find(b => b.classList.contains('active')) || tabs[0];
      activateByPanelId(initiallyActive.getAttribute('aria-controls'));
    })();
</script>
</body>
</html>
